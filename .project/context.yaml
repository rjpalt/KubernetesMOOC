# Machine Project Context (gitignored)
version: 1
azure:
  subscriptionEnvVar: AZURE_SUBSCRIPTION_ID
  subscriptionId: ede18d8a-a758-4a40-b15e-6eded5264b93
  resourceGroup: kubernetes-learning
  aksCluster: kube-mooc
  acr:
    loginServer: kubemooc.azurecr.io
    name: kubemooc
kubernetes:
  featureNamespacePattern: feature-<branch>
  stableNamespaces:
    - default
    - kube-system
images:
  tagPattern: "{branch}-{sha}"
  repositories:
    - todo-app-be
    - todo-app-fe
workflows:
  ciName: "CI Pipeline - Microservices"
  featureDeployWorkflow: deploy-feature-branches.yml
  productionDeployWorkflow: deploy-production.yml
rules:
  allowedActions:
    azure:
      - aks_cluster_list
      - acr_repository_list
      - acr_repository_show_tags
    github:
      - list_pull_requests
      - get_pull_request
      - get_workflow_runs
notes:
  - Non-destructive operations only.
  - Update subscriptionId if environment changes.

dx:
  docsIndex:
    - docs/overview/onboarding.md
    - docs/overview/repo-map.md
    - docs/development/local-dev.md
    - docs/development/script-catalog.md
    - docs/testing/index.md
  serviceDocs:
    - course_project/TESTING_OVERVIEW.md
    - course_project/todo-backend/tests/TEST_PLAN.md
    - course_project/todo-app/TEST_PLAN.md
  docPlacement:
    root: indices-only
    courseProjectDocs: service-specific
  devModes:
    localDev: make local-dev  # uv apps + DB via backend compose
    compose: make compose-up   # all services in compose (attached)
  db:
    up: make db-up
    down: make db-down
  tests:
    all: make test
    backend: make test-be
    frontend: make test-fe
  buildQuality:
    build: make build-images TAG=<tag>  # updates course_project/docker-compose.yaml
    quality: make quality [CHECK=1]
  conventions:
    - no file moves without confirmation
    - root docs are short; link to canonical sources
    - Kubernetes: guidance only; do not implement
